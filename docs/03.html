<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>공간데이터사이언스 개론 - 3&nbsp; 지오메트리</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04.html" rel="next">
<link href="./02.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title"><span id="sec-geometry" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">지오메트리</span></span></h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">공간데이터사이언스 개론</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/sangillee66/book_sds_trans" title="소스 코드" class="quarto-navigation-tool px-1" aria-label="소스 코드"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서장</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">공간데이터</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">시작하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">좌표계</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">지오메트리</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">구체 지오메트리</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">속성과 서포트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">데이터 큐브</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">공간데이터사이언스와 R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">sf와 stars 패키지</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">공간데이터의 플로팅</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">대규모 데이터와 클라우드 네이티브</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">공간통계분석과 공간모델링</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">공간데이터의 통계적 모형화</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">포인트 패턴 분석</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">공간적 인터폴레이션</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">다변량 및 시공간 지구통계학</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">근접성과 에어리어 데이터</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">공간적 자기상관 측도</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">공간적 회귀분석</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">공간계량경제학적 모형</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">부록</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">예전 R 공간 패키지</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">R 기초</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">목차</h2>
   
  <ul>
<li>
<a href="#%EC%8B%AC%ED%94%8C-%ED%94%BC%EC%B2%98-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC" id="toc-심플-피처-지오메트리" class="nav-link active" data-scroll-target="#%EC%8B%AC%ED%94%8C-%ED%94%BC%EC%B2%98-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC"><span class="header-section-number">3.1</span> 심플 피처 지오메트리</a>
  <ul class="collapse">
<li><a href="#%EA%B0%9C%EC%9D%98-%EB%8C%80%ED%91%9C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC" id="toc-개의-대표-지오메트리" class="nav-link" data-scroll-target="#%EA%B0%9C%EC%9D%98-%EB%8C%80%ED%91%9C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC"><span class="header-section-number">3.1.1</span> 7개의 대표 지오메트리</a></li>
  <li><a href="#%EC%8B%AC%ED%94%8C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC-%EB%B0%B8%EB%A6%AC%EB%93%9C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC-%EB%A7%81-%EB%94%94%EB%A0%89%EC%85%98" id="toc-심플-지오메트리-밸리드-지오메트리-링-디렉션" class="nav-link" data-scroll-target="#%EC%8B%AC%ED%94%8C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC-%EB%B0%B8%EB%A6%AC%EB%93%9C-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC-%EB%A7%81-%EB%94%94%EB%A0%89%EC%85%98"><span class="header-section-number">3.1.2</span> 심플 지오메트리, 밸리드 지오메트리, 링 디렉션</a></li>
  <li><a href="#z-%EC%A2%8C%ED%91%9C%EC%99%80-m-%EC%A2%8C%ED%91%9C" id="toc-z-좌표와-m-좌표" class="nav-link" data-scroll-target="#z-%EC%A2%8C%ED%91%9C%EC%99%80-m-%EC%A2%8C%ED%91%9C"><span class="header-section-number">3.1.3</span> Z 좌표와 M 좌표</a></li>
  <li><a href="#%EC%97%A0%ED%94%84%ED%8B%B0-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC" id="toc-엠프티-지오메트리" class="nav-link" data-scroll-target="#%EC%97%A0%ED%94%84%ED%8B%B0-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC"><span class="header-section-number">3.1.4</span> 엠프티 지오메트리</a></li>
  <li><a href="#%EA%B0%9C%EC%9D%98-%EB%B6%80%EC%88%98%EC%A0%81%EC%9D%B8-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC" id="toc-개의-부수적인-지오메트리" class="nav-link" data-scroll-target="#%EA%B0%9C%EC%9D%98-%EB%B6%80%EC%88%98%EC%A0%81%EC%9D%B8-%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC"><span class="header-section-number">3.1.5</span> 10개의 부수적인 지오메트리</a></li>
  <li><a href="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%97%94%EC%BD%94%EB%94%A9%EA%B3%BC-%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EC%97%94%EC%BD%94%EB%94%A9" id="toc-텍스트-엔코딩과-바이너리-엔코딩" class="nav-link" data-scroll-target="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%97%94%EC%BD%94%EB%94%A9%EA%B3%BC-%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EC%97%94%EC%BD%94%EB%94%A9"><span class="header-section-number">3.1.6</span> 텍스트 엔코딩과 바이너리 엔코딩</a></li>
  </ul>
</li>
  <li>
<a href="#%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC%EC%97%90-%EC%A0%81%EC%9A%A9%EB%90%98%EB%8A%94-%EC%98%A4%ED%8D%BC%EB%A0%88%EC%9D%B4%EC%85%98" id="toc-지오메트리에-적용되는-오퍼레이션" class="nav-link" data-scroll-target="#%EC%A7%80%EC%98%A4%EB%A9%94%ED%8A%B8%EB%A6%AC%EC%97%90-%EC%A0%81%EC%9A%A9%EB%90%98%EB%8A%94-%EC%98%A4%ED%8D%BC%EB%A0%88%EC%9D%B4%EC%85%98"><span class="header-section-number">3.2</span> 지오메트리에 적용되는 오퍼레이션</a>
  <ul class="collapse">
<li><a href="#%EB%8B%A8%ED%95%AD-%ED%94%84%EB%A0%88%EB%94%94%EC%BC%80%EC%9D%B4%ED%8A%B8" id="toc-단항-프레디케이트" class="nav-link" data-scroll-target="#%EB%8B%A8%ED%95%AD-%ED%94%84%EB%A0%88%EB%94%94%EC%BC%80%EC%9D%B4%ED%8A%B8"><span class="header-section-number">3.2.1</span> 단항 프레디케이트</a></li>
  <li><a href="#%EC%9D%B4%ED%95%AD-%ED%94%84%EB%A0%88%EB%94%94%EC%BC%80%EC%9D%B4%ED%8A%B8%EC%99%80-de-9im" id="toc-이항-프레디케이트와-de-9im" class="nav-link" data-scroll-target="#%EC%9D%B4%ED%95%AD-%ED%94%84%EB%A0%88%EB%94%94%EC%BC%80%EC%9D%B4%ED%8A%B8%EC%99%80-de-9im"><span class="header-section-number">3.2.2</span> 이항 프레디케이트와 DE-9IM</a></li>
  <li><a href="#%EB%8B%A8%ED%95%AD-%EC%B8%A1%EB%8F%84" id="toc-단항-측도" class="nav-link" data-scroll-target="#%EB%8B%A8%ED%95%AD-%EC%B8%A1%EB%8F%84"><span class="header-section-number">3.2.3</span> 단항 측도</a></li>
  <li><a href="#%EC%9D%B4%ED%95%AD-%EC%B8%A1%EB%8F%84" id="toc-이항-측도" class="nav-link" data-scroll-target="#%EC%9D%B4%ED%95%AD-%EC%B8%A1%EB%8F%84"><span class="header-section-number">3.2.4</span> 이항 측도</a></li>
  <li><a href="#%EB%8B%A8%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90" id="toc-단항-변환자" class="nav-link" data-scroll-target="#%EB%8B%A8%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90"><span class="header-section-number">3.2.5</span> 단항 변환자</a></li>
  <li><a href="#%EC%9D%B4%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90" id="toc-이항-변환자" class="nav-link" data-scroll-target="#%EC%9D%B4%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90"><span class="header-section-number">3.2.6</span> 이항 변환자</a></li>
  <li><a href="#%EB%8B%A4%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90" id="toc-다항-변환자" class="nav-link" data-scroll-target="#%EB%8B%A4%ED%95%AD-%EB%B3%80%ED%99%98%EC%9E%90"><span class="header-section-number">3.2.7</span> 다항 변환자</a></li>
  </ul>
</li>
  <li><a href="#%EC%A0%95%EB%B0%80%EB%8F%84" id="toc-정밀도" class="nav-link" data-scroll-target="#%EC%A0%95%EB%B0%80%EB%8F%84"><span class="header-section-number">3.3</span> 정밀도</a></li>
  <li>
<a href="#%EC%BB%A4%EB%B2%84%EB%A6%AC%EC%A7%80-%ED%85%8C%EC%85%80%EB%A0%88%EC%9D%B4%EC%85%98%EA%B3%BC-%EB%9E%98%EC%8A%A4%ED%84%B0" id="toc-커버리지-테셀레이션과-래스터" class="nav-link" data-scroll-target="#%EC%BB%A4%EB%B2%84%EB%A6%AC%EC%A7%80-%ED%85%8C%EC%85%80%EB%A0%88%EC%9D%B4%EC%85%98%EA%B3%BC-%EB%9E%98%EC%8A%A4%ED%84%B0"><span class="header-section-number">3.4</span> 커버리지: 테셀레이션과 래스터</a>
  <ul class="collapse">
<li><a href="#%ED%86%A0%ED%8F%B4%EB%A1%9C%EC%A7%80-%EB%AA%A8%ED%98%95" id="toc-토폴로지-모형" class="nav-link" data-scroll-target="#%ED%86%A0%ED%8F%B4%EB%A1%9C%EC%A7%80-%EB%AA%A8%ED%98%95"><span class="header-section-number">3.4.1</span> 토폴로지 모형</a></li>
  <li><a href="#%EB%9E%98%EC%8A%A4%ED%84%B0-%ED%85%8C%EC%85%80%EB%A0%88%EC%9D%B4%EC%85%98" id="toc-래스터-테셀레이션" class="nav-link" data-scroll-target="#%EB%9E%98%EC%8A%A4%ED%84%B0-%ED%85%8C%EC%85%80%EB%A0%88%EC%9D%B4%EC%85%98"><span class="header-section-number">3.4.2</span> 래스터 테셀레이션</a></li>
  </ul>
</li>
  <li><a href="#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC" id="toc-네트워크" class="nav-link" data-scroll-target="#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC"><span class="header-section-number">3.5</span> 네트워크</a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C" id="toc-연습문제" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C"><span class="header-section-number">3.6</span> 연습문제</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/sangillee66/book_sds_trans/issues/new" class="toc-action"><i class="bi bi-github"></i>이슈 보고</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title d-none d-lg-block"><span id="sec-geometry" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">지오메트리</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">2025년 8월 13일</p>
    </div>
  </div>
    
  </div>
  


</header><p>2장에서 좌표계에 대해 학습했으므로, 이제 이 장에서는 좌표계를 활용해 지오메트리를 정의하는 방법을 배운다. 본 장에서 다룰 주요 내용은 다음과 같다.</p>
<ul>
<li><p>심플 피처(simple feature): 포인트, 라인, 폴리곤 지오메트리를 다루는 표준</p></li>
<li><p>지오메트리에 적용되는 다양한 오퍼레이션</p></li>
<li><p>커버리지(coveratge): 공간 혹은 시공간을 표현하는 함수</p></li>
<li><p>테셀레이션(tessellation): 하나의 영역을 여러 하위 영역으로 세분화한 구조</p></li>
<li><p>네트워크</p></li>
</ul>
<p>구면 지오메트리는 4장에서 논의하며, 래스터와 공간 또는 시공간을 직사각형 형태로 분할한 다른 세분화 체계는 6장에서 다룬다.</p>
<section id="심플-피처-지오메트리" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="심플-피처-지오메트리">
<span class="header-section-number">3.1</span> 심플 피처 지오메트리</h2>
<p>심플 피처 지오메트리는 피처의 지오메트리를 설명하는 방법이다. 여기서 피처란 지오메트리를 가진 사물을 의미하며, 암묵적으로 시간 속성을 포함할 수 있고, 사물을 묘사하기 위한 라벨이나 정량적 측도와 관련된 속성을 가질 수 있다. 심플 피처 지오메트리의 주요 목적은 2차원 공간에서 포인트, 라인, 폴리곤을 기반으로 기하학적 형태를 설명하는 것이다. ’심플’이라는 형용사가 붙은 이유는 라인이나 폴리곤 지오메트리도 포인트 지오메트리와 그것을 연결한 직선으로 표현할 수 있기 때문이다.</p>
<p>심플 피처 액세스는 심플 피처 지오메트리를 설명하는 표준으로(Herring 2011, 2010; ISO 2004), 다음의 사항을 포함한다.</p>
<ul>
<li><p>클래스 위계</p></li>
<li><p>오퍼레이션의 집합</p></li>
<li><p>이항 엔코딩과 텍스트 엔코딩</p></li>
</ul>
<p>먼저, 가장 일반적으로 사용되는 7가지 심플 피처 지오메트리 유형에 대해 논의할 것이다.</p>
<section id="개의-대표-지오메트리" class="level3" data-number="3.1.1"><h3 data-number="3.1.1" class="anchored" data-anchor-id="개의-대표-지오메트리">
<span class="header-section-number">3.1.1</span> 7개의 대표 지오메트리</h3>
<p>단일(single) 피처를 나타내는 데 사용되는 가장 일반적인 심플 피처 지오메트리 유형은 다음과 같다.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>유형</th>
<th>설명</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>POINT</code></td>
<td>단일 포인트 지오메트리</td>
</tr>
<tr class="even">
<td><code>MULTIPOINT</code></td>
<td>
<code>POINT</code>의 집합</td>
</tr>
<tr class="odd">
<td><code>LINESTRING</code></td>
<td>단일 라인스트링(두개 이상의 포인트가 직선으로 연결되어 있음)</td>
</tr>
<tr class="even">
<td><code>MULTILINESTRING</code></td>
<td>
<code>LINESTRING</code>의 집합</td>
</tr>
<tr class="odd">
<td><code>POLYGON</code></td>
<td>외부 링과 0개 이상의 내부 링(구멍을 나타냄)으로 구성된 구조</td>
</tr>
<tr class="even">
<td><code>MULTIPOLYGON</code></td>
<td>
<code>POLYGON</code>의 집합</td>
</tr>
<tr class="odd">
<td><code>GEOMETRYCOLLECTION</code></td>
<td>위에서 언급된 모든 지오메트리의 집합</td>
</tr>
</tbody>
</table>
<div id="fig-3-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-sfgeometries-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-1" data-gallery="quarto-lightbox-gallery-1"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-sfgeometries-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.1: 심플 피처 지오메트리의 주요 유형
</figcaption></figure>
</div>
<p>그림 3.1은 이러한 기본 지오메트리 유형의 예를 보여준다. 지오메트리를 표현하는 사람이 읽을 수 있는 WKT 표기법은 다음과 같다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">POINT</span> (<span class="dv">0</span> <span class="dv">1</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">MULTIPOINT</span> ((<span class="dv">1</span> <span class="dv">1</span>), (<span class="dv">2</span> <span class="dv">2</span>), (<span class="dv">4</span> <span class="dv">1</span>), (<span class="dv">2</span> <span class="dv">3</span>), (<span class="dv">1</span> <span class="dv">4</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">LINESTRING</span> (<span class="dv">1</span> <span class="dv">1</span>, <span class="dv">5</span> <span class="dv">5</span>, <span class="dv">5</span> <span class="dv">6</span>, <span class="dv">4</span> <span class="dv">6</span>, <span class="dv">3</span> <span class="dv">4</span>, <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">MULTILINESTRING</span> ((<span class="dv">1</span> <span class="dv">1</span>, <span class="dv">5</span> <span class="dv">5</span>, <span class="dv">5</span> <span class="dv">6</span>, <span class="dv">4</span> <span class="dv">6</span>, <span class="dv">3</span> <span class="dv">4</span>, <span class="dv">2</span> <span class="dv">3</span>), (<span class="dv">3</span> <span class="dv">0</span>, <span class="dv">4</span> <span class="dv">1</span>, <span class="dv">2</span> <span class="dv">1</span>))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">POLYGON</span> ((<span class="dv">2</span> <span class="dv">1</span>, <span class="dv">3</span> <span class="dv">1</span>, <span class="dv">5</span> <span class="dv">2</span>, <span class="dv">6</span> <span class="dv">3</span>, <span class="dv">5</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">4</span>, <span class="dv">3</span> <span class="dv">4</span>, <span class="dv">1</span> <span class="dv">3</span>, <span class="dv">2</span> <span class="dv">1</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">2</span> <span class="dv">2</span>, <span class="dv">3</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">2</span>, <span class="dv">2</span> <span class="dv">2</span>))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">MULTIPOLYGON</span> (((<span class="dv">2</span> <span class="dv">1</span>, <span class="dv">3</span> <span class="dv">1</span>, <span class="dv">5</span> <span class="dv">2</span>, <span class="dv">6</span> <span class="dv">3</span>, <span class="dv">5</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">4</span>, <span class="dv">3</span> <span class="dv">4</span>, <span class="dv">1</span> <span class="dv">3</span>, <span class="dv">2</span> <span class="dv">1</span>),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">2</span> <span class="dv">2</span>, <span class="dv">3</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">2</span>, <span class="dv">2</span> <span class="dv">2</span>)), ((<span class="dv">3</span> <span class="dv">7</span>, <span class="dv">4</span> <span class="dv">7</span>, <span class="dv">5</span> <span class="dv">8</span>, <span class="dv">3</span> <span class="dv">9</span>, <span class="dv">2</span> <span class="dv">8</span>, <span class="dv">3</span> <span class="dv">7</span>)))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">GEOMETRYCOLLECTION</span> (</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">POLYGON</span> ((<span class="dv">2</span> <span class="dv">1</span>, <span class="dv">3</span> <span class="dv">1</span>, <span class="dv">5</span> <span class="dv">2</span>, <span class="dv">6</span> <span class="dv">3</span>, <span class="dv">5</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">4</span>, <span class="dv">3</span> <span class="dv">4</span>, <span class="dv">1</span> <span class="dv">3</span>, <span class="dv">2</span> <span class="dv">1</span>),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      (<span class="dv">2</span> <span class="dv">2</span> , <span class="dv">3</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">3</span>, <span class="dv">4</span> <span class="dv">2</span>, <span class="dv">2</span> <span class="dv">2</span>)),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">LINESTRING</span> (<span class="dv">1</span> <span class="dv">6</span>, <span class="dv">5</span> <span class="dv">10</span>, <span class="dv">5</span> <span class="dv">11</span>, <span class="dv">4</span> <span class="dv">11</span>, <span class="dv">3</span> <span class="dv">9</span>, <span class="dv">2</span> <span class="dv">8</span>),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">POINT</span> (<span class="dv">2</span> <span class="dv">5</span>),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">POINT</span> (<span class="dv">5</span> <span class="dv">4</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>좌표는 공백으로 구분되며, 포인트들은 쉼표로 구분된다. 집합은 괄호로 묶여 있고, 각 요소는 쉼표로 구분된다. 폴리곤은 외부 링과 (존재할 경우) 내부 링(구멍을 나타냄)으로 구성된다.</p>
<p>지오메트리의 개별 포인트는 최소 두 개의 좌표를 포함하며, 이 좌표는 <span class="math inline">\(x\)</span>와 <span class="math inline">\(y\)</span> 순서로 나열된다. 이 좌표가 타원체 좌표를 나타내는 경우, <span class="math inline">\(x\)</span>는 일반적으로 경도를, <span class="math inline">\(y\)</span>는 위도를 의미하지만, 상황에 따라 위도-경도의 순서로 나열될 수도 있다(2.4절 및 섹션 7.7.6 참조).</p>
</section><section id="심플-지오메트리-밸리드-지오메트리-링-디렉션" class="level3" data-number="3.1.2"><h3 data-number="3.1.2" class="anchored" data-anchor-id="심플-지오메트리-밸리드-지오메트리-링-디렉션">
<span class="header-section-number">3.1.2</span> 심플 지오메트리, 밸리드 지오메트리, 링 디렉션</h3>
<p><code>LINESTRING</code>은 자기 교차가 없을 때 심플 지오메트리가 된다.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># LINESTRING (0 0, 1 1, 2 2, 0 2, 1 1, 2 0)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># is_simple </span></span>
<span><span class="co">#     FALSE</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>밸리드(valid) 폴리곤과 멀티폴리곤은 다음의 모든 프로퍼티을 갖는다.</p>
<ul>
<li><p>폴리곤 링은 닫혀 있어야 한다(즉, 첫번째 포인트와 마지막 포인트는 동일하다)</p></li>
<li><p>폴리곤 구멍(내부 링)은 외부 링의 내부에 위치한다.</p></li>
<li><p>폴리곤 내부 링은 외부 링과 한 점에서 만날 수 있으나, 선분(라인)은 공유할 수 없다.</p></li>
<li><p>폴리곤 링은 자신의 경로를 반복하지 않는다.</p></li>
<li><p>멀티폴리곤에서 외부 링은 다른 외부 링과 한 지점에서 만날 수는 있지만, 선분을 공유할 수는 없다.</p></li>
</ul>
<p>이 조건들 중 어느 하나라도 충족하지 못하면 해당 지오메트리는 밸리드 지오메트리가 아니다. 밸리드 하지 않은 지오메트리는 일반적으로 오퍼레이션 수행 중 오류를 일으키지만, 보통 사전에 밸리드 지오메트리로 수정된다.</p>
<p>추가적인 규칙으로, 폴리곤의 외부 링은 반시계 방향으로 감겨 있어야 하고, 구멍(내부 링)은 시계 방향으로 감겨 있어야 한다는 점이 있다.(역자주: 여기서 ’감기다’는 것은 폴리곤 경계를 따라 점들이 연결되는 방향을 의미한다. 외부 링은 반시계 방향으로 이동할 때 왼쪽이 폴리곤 내부가 되고, 내부 링은 시계 방향으로 이동할 때 왼쪽이 폴리곤 내부이며 오른쪽이 구멍(빈 공간)임을 나타낸다. 이 방향 규칙은 컴퓨터가 폴리곤 내부와 구멍을 정확히 구분하는 데 필수적이다.) 그러나 이러한 규칙을 따르지 않는 폴리곤도 여전히 밸리드 지오메트리로 간주된다. 구면상의 폴리곤의 경우, ’시계 방향’이라는 개념은 크게 유용하지 않다. 예를 들어, 적도를 폴리곤으로 간주할 때 북반구와 남반구 중 어느 쪽이 ’내부’인지 명확하지 않기 때문이다. 이 책에서 채택한 규칙은 폴리곤의 경계를 따라 이동할 때 왼쪽에 위치한 영역을 폴리곤 내부로 간주하는 것이다(7.3절 참조)</p>
</section><section id="z-좌표와-m-좌표" class="level3" data-number="3.1.3"><h3 data-number="3.1.3" class="anchored" data-anchor-id="z-좌표와-m-좌표">
<span class="header-section-number">3.1.3</span> Z 좌표와 M 좌표</h3>
<p>심플 피처 지오메트리의 단일 포인트(버텍스)는 <code>X</code> 좌표와 <code>Y</code> 좌표를 가질 수 있다.</p>
<ul>
<li><p><code>Z</code> 좌표: 고도</p></li>
<li><p><code>M</code> 좌표: 측정치</p></li>
</ul>
<p>M 속성은 버텍스의 프로퍼티여야 한다. 예를 들어, <code>LINESTRING</code>에 이동 경로 데이터를 담기 위해 시간 정보를 <code>M</code> 속성에 인코딩하는 것은 매력적인 방법으로 보인다. 그러나 경로가 자기 교차하면 이러한 <code>LINESTRING</code>은 밸리드하지 않거나 심플하지 않는 상태가 되는데, 이 자기 교차는 <code>X</code>와 <code>Y</code> 좌표만 고려할 때 발생한다.</p>
<p><code>Z</code>와 <code>M</code>은 자주 사용되지 않으며, 이들을 활용할 수 있는 소프트웨어 지원도 (아직까지는) 드문 편이다. 그래도 이들의 WKT 표현은 비교적 쉽게 이해할 수 있다.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># POINT Z (1 3 2)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># POINT M (1 3 2)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># LINESTRING ZM (3 1 2 4, 4 4 2 2)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="엠프티-지오메트리" class="level3" data-number="3.1.4"><h3 data-number="3.1.4" class="anchored" data-anchor-id="엠프티-지오메트리">
<span class="header-section-number">3.1.4</span> 엠프티 지오메트리</h3>
<p>피쳐 지오메트리 프레임워크에서 매우 중요한 개념 중 하나는 엠프티(empty) 지오메트리이다. 엠프티 지오메트리는 기하학적 오퍼레이션(3.2절)을 수행할 때 자연스럽게 생성된다. 예를 들어 <code>POINT (0 0)</code>과 <code>POINT (1 1)</code>의 인터섹션 여부를 검토한다고 하자.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># GEOMETRYCOLLECTION EMPTY</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>두 포인트는 인터섹트하지 않으므로 엠프티 집합이 도출된다. 엠프티 포인트를 비엠프티 지오메트리와 결합하면(합집합을 구하면) 엠프티 포인트는 사라진다.</p>
<p>모든 지오메트리 유형은 다음과 같이 엠프티 지오메트리를 나타내는 특별한 값을 가진다.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># POINT EMPTY</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># LINESTRING M EMPTY</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>엠프티 집합이 생성된다는 점은 동일하고 디멘션이 다를 뿐이다(3.2절 참조).</p>
</section><section id="개의-부수적인-지오메트리" class="level3" data-number="3.1.5"><h3 data-number="3.1.5" class="anchored" data-anchor-id="개의-부수적인-지오메트리">
<span class="header-section-number">3.1.5</span> 10개의 부수적인 지오메트리</h3>
<p>다음의 열 가지 지오메트리는 사용 빈도는 낮지만 점점 증가하는 추세에 있다.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>유형</th>
<th>설명</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>CIRCULARSTRING</code></td>
<td>기본적인 곡선 유형으로, 직선 유형의 LINESTRING과 유사. 단일 세그먼트를 구성하려면 세 점이 필요하며, 이들은 시작점과 끝점(첫 번째와 세 번째 점) 그리고 호 상의 중간 점임. 예외적으로 닫힌 원의 경우에는 시작점과 끝점이 동일하며, 두 번째 점은 반드시 호의 중심, 즉 원의 반대편에 위치해야 함. 호를 연결할 때는 이전 호의 마지막 점이 다음 호의 첫 번째 점과 일치해야 하는데, 이는 <code>LINESTRING</code>에서도 동일한 규칙임. 따라서 유효한 문자열은 반드시 1보다 큰 홀수 개의 점을 가져야 함.</td>
</tr>
<tr class="even">
<td><code>COMPOUNDCURVE</code></td>
<td>곡선 세그먼트와 선형 세그먼트를 모두 포함하는 단일 연속 곡선. 구성 요소들이 잘 연결되어 있어야 하며, 모든 구성 요소의 끝점(마지막을 제외한)은 다음 구성 요소의 시작점과 일치해야 함.</td>
</tr>
<tr class="odd">
<td><code>CURVEPOLYGON</code></td>
<td>
<code>COMPOUNDCURVE</code>가 내재된 사례: <code>CURVEPOLYGON( COMPOUNDCURVE(CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),(4 3, 4 5, 1 4, 0 0)), CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1))</code>
</td>
</tr>
<tr class="even">
<td><code>MULTICURVE</code></td>
<td>곡선으로 이루어진 1차원 지오메트리 컬렉션. 라인 문자열, 서큘러 문자열 또는 컴파운드 문자열을 포함할 수 있음.</td>
</tr>
<tr class="odd">
<td><code>MULTISURFACE</code></td>
<td>동일한 CRS를 사용하는 <code>SURFACE</code>로 구성된 2차원 지오메트리 컬렉션</td>
</tr>
<tr class="even">
<td><code>CURVE</code></td>
<td>일반적으로 여러 점의 연결로 정의되는 1차원 지오메트리 객체로, 점들 간의 인터폴레이션 방식에 따라 커브의 하위 유형이 결정됨.</td>
</tr>
<tr class="odd">
<td><code>SURFACE</code></td>
<td>2차원 지오메트리 객체</td>
</tr>
<tr class="even">
<td><code>POLYHEDRALSURFACE</code></td>
<td>공통 경계 세그먼트를 공유하는 연속된 폴리곤들의 집합</td>
</tr>
<tr class="odd">
<td><code>TIN</code></td>
<td>오직 삼각형으로만 구성된 <code>POLYHEDRALSURFACE</code>
</td>
</tr>
<tr class="even">
<td><code>TRIANGLE</code></td>
<td>세 개의 비공선적(non-collinear) 버텍스로 이루어진, 내부 경계가 없는 폴리곤(역자주: 세 점이 일직선 상에 놓이지 않음을 의미한다.)</td>
</tr>
</tbody>
</table>
<p><code>CIRCULARSTRING</code>, <code>COMPOUNDCURVE</code>, <code>CURVEPOLYGON</code>은 SFA 표준에는 포함되지 않으나, SQL-MM 파트3 표준에는 포함되어 있다. 위 표의 설명은 PostGIS 매뉴얼에서 그대로 가져온 것이다.</p>
</section><section id="텍스트-엔코딩과-바이너리-엔코딩" class="level3" data-number="3.1.6"><h3 data-number="3.1.6" class="anchored" data-anchor-id="텍스트-엔코딩과-바이너리-엔코딩">
<span class="header-section-number">3.1.6</span> 텍스트 엔코딩과 바이너리 엔코딩</h3>
<p>심플 피처 표준에는 두 가지 인코딩 방식이 포함되어 있다. 하나는 텍스트 인코딩이고, 다른 하나는 바이너리 인코딩이다. 위에서 사용된 WKT는 사람이 읽을 수 있는(human-readable) 방식이며, WKB(well-known binary) 인코딩은 기계가 읽을 수 있는(machine-readable) 방식이다. WKB 인코딩은 정보 손실이 없고, 일반적인 텍스트 인코딩 및 디코딩보다 작업 속도가 빠르다. 이는 R의 <strong>sf</strong> 패키지와 GDAL, GEOS, liblwgeom, s2geometry 라이브러리 간의 모든 통신에서 사용된다(그림 1.7).</p>
</section></section><section id="지오메트리에-적용되는-오퍼레이션" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="지오메트리에-적용되는-오퍼레이션">
<span class="header-section-number">3.2</span> 지오메트리에 적용되는 오퍼레이션</h2>
<p>심플 피처 지오메트리의 프로퍼티를 추출할 수 있으며, 심플 피처 지오메트리들의 결합으로 새로운 지오메트리가 생성된 경우에도 해당 프로퍼티를 추출할 수 있다. 이 섹션에서는 기하학적 프로퍼티에만 초점을 맞춘 오퍼레이션을 간략히 다룬다. 비기하학적 피처 속성 분석은 5장에서 다룬다. 이 섹션의 일부 내용은 Pebesma (2018)에서 가져왔다.</p>
<p>기하학적 프로퍼티에 대한 오퍼레이션은 입력과 출력에 따라 분류할 수 있다. 우선 출력 관점에서 다음과 같이 구분된다.</p>
<ul>
<li><p><strong>프레디케이트(predicate)</strong>: 특정 프로퍼티가 참(TRUE)임을 판단하는 논리값</p></li>
<li><p><strong>측도(measure)</strong>: 양적 값(수치이며 측정 단위가 있을 수 있음)</p></li>
<li><p><strong>변형(transformation)</strong>: 새롭게 생성된 지오메트리</p></li>
</ul>
<p>오퍼레이션이 적용되는 지오메트리의 수에 따라 다음과 같이 분류할 수 있다.</p>
<ul>
<li><p><strong>단항(unary)</strong>: 단일 지오메트리에 적용</p></li>
<li><p><strong>이항(binary)</strong>: 두 개의 지오메트리 쌍에 적용</p></li>
<li><p><strong>다항(n-ary)</strong>: 여러 지오메트리 집합에 적용</p></li>
</ul>
<section id="단항-프레디케이트" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="단항-프레디케이트">
<span class="header-section-number">3.2.1</span> 단항 프레디케이트</h3>
<p>단항 프레디케이트는 하나의 지오메트리의 특정 프로퍼티를 설명한다. <code>is_simple</code>, <code>is_valid</code>, <code>is_empty</code>와 같는 프레디케이트는 각각 지오메트리가 심플한지, 밸리드한지, 엠프티한지의 여부에 대한 논리값을 반환한다. <code>is_longlat</code> 프레디케이트는 주어진 CRS가 경위도 좌표계인지 평면 좌표계인지 여부를 반환한다. <code>is(geometry, class)</code>는 지오메트리가 특정한 클래스에 속하는지 여부를 확인한다.</p>
</section><section id="이항-프레디케이트와-de-9im" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="이항-프레디케이트와-de-9im">
<span class="header-section-number">3.2.2</span> 이항 프레디케이트와 DE-9IM</h3>
<p>DE-9IM(Dimensionally Extended Nine-Intersection Model)(Clementini, Di Felice, and Oosterom 1993; Egenhofer and Franzosa 1991)은 2차원 공간(<span class="math inline">\(R^2\)</span>)에서 두 지오메트리 간의 정성적 관계를 설명하는 모형이다. 모든 지오메트리는 디멘션 값을 가진다.</p>
<ul>
<li><p>포인트 지오메트리: 0</p></li>
<li><p>라인 지오메트리: 1</p></li>
<li><p>폴리곤 지오메트리: 2</p></li>
<li><p>엠프티 지오메트리: F(거짓)</p></li>
</ul>
<p>모든 지오메트리는 내부(I), 경계(B), 외부(E)를 가지며, 이들 요소의 역할은 폴리곤의 경우에 보다 명확히 드러난다.</p>
<ul>
<li><p><strong>라인</strong>의 경계는 종점에 의해 형성되고, 선상의 모든 비종점이 내부를 구성한다.</p></li>
<li><p><strong>포인트</strong>는 0차원의 내부를 가지지만, 경계는 없다.</p></li>
</ul>
<div id="fig-3-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-de9im-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-2" data-gallery="quarto-lightbox-gallery-2"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-de9im-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.2: DE-9IM: 폴리곤의 내부, 경계, 외부(행)와 라인의 내부, 경계, 외부(열) 간의 인터섹션(빨간색으로 표시)
</figcaption></figure>
</div>
<p>그림 3.2는 폴리곤과 라인의 내부(I), 경계(B), 외부(E) 영역 간의 인터섹션을 빨간색으로 표시한 것이다. 각 그래프의 제목에는 교차 결과로 도출되는 차원(0, 1, 2 또는 F)이 나타나 있다. 폴리곤 지오메트리와 라인 지오메트리 간의 관계는 이러한 차원의 결합으로 표현된다.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#      [,1]       </span></span>
<span><span class="co"># [1,] "1020F1102"</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>첫 세 문자는 <em>첫 번째</em> 지오메트리(폴리곤)의 내부에 대한 것으로, 그림 3.2에서는 첫 번째 행에 배열되어 있다.(역자주: 위의 9자리 문자는 그림 3.2에 나타난 9개 교차 결과의 차원을 표시한 것이다. 차원 값은 행 단위로 지그재그 방식(왼쪽에서 오른쪽, 다음 행은 오른쪽에서 왼쪽)으로 읽는다.) 더 나아가 지오메트리 쌍에 대해 <em>마스크</em>(mask) <em>문자열</em>로 표현된 특정 조건의 만족 여부를 질의할 수 있다.(역자주: 마스크 문자열은 원하는 지오메트리 간 공간 관계를 질의하거나 필터링할 수 있게 해준다.) 예를 들어, 문자열 <code>"0******"</code>는 두 번째 지오메트리가 첫 번째 지오메트리의 내부와 하나 이상의 경계 점을 공유할 때 <code>TRUE</code>로 평가된다.(역자주: 그림 3.2를 예로 든다면, 폴리곤의 내부에 라인의 내부가 포함된 경우를 찾는 것이다.) 여기서 기호 <code>*</code>는 디멘션(0, 1, 2 또는 F) 중 어느 것이든 올 수 있음을 의미한다. 이 경우 마스크 문자열을 적용할 수 있는데, <code>"T********"</code>는 내부가 서로 교차하는 모든 지오메트리 쌍을 필터링할 수 있다. 여기서 기호 T는 차원 디멘션이 0, 1, 2이면서 비엠프티 인터섹션인 경우를 뜻한다.</p>
<p>더 나아가 이항 프레디케이트는 DE-9IM에서 규정된 정의를 활용함으로써 일반 언어 동사로 표현될 수 있다. 예를 들어, 프레디케이트 <code>equals</code>는 관계 <code>"T*F**FFF*"</code>와 동일하다. 어떤 두 지오메트리가 이러한 관계를 만족한다면, 그 둘은 (위상적으로는) 동일하다고 볼 수 있지만, 노드의 순서는 다를 수 있다.</p>
<p>이항 프레디케이트를 나열하면 다음과 같다.</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>프레디케이트</th>
<th>의미</th>
<th>역프레디케이트</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>contains</code></td>
<td>A 포인트 어느 것도 B의 외부에 있지 않다.</td>
<td><code>within</code></td>
</tr>
<tr class="even">
<td><code>contains_properly</code></td>
<td>A는 B를 포함하며, B의 어떤 포인트도 A의 경계 상에 있지 않다.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>covers</code></td>
<td>B의 어떤 포인트도 A의 외부에 있지 않다.</td>
<td><code>covered_by</code></td>
</tr>
<tr class="even">
<td><code>covered_by</code></td>
<td>
<code>covers</code>의 반대</td>
<td></td>
</tr>
<tr class="odd">
<td><code>crosses</code></td>
<td>A와 B는 일부 내부 포인트를 공유하지만 모든 포인트를 공유하는 것은 아니다.</td>
<td></td>
</tr>
<tr class="even">
<td><code>disjoint</code></td>
<td>A와 B는 어떤 포인트도 서로 공유하지 않는다.</td>
<td><code>intersects</code></td>
</tr>
<tr class="odd">
<td><code>equals</code></td>
<td>A와 B는 위상적으로 동일하다. 노드 순서나 노드 수가 다를 수 있으며, A가 B를 포함하고 A가 B의 내부에 있는 것과 동일하다.</td>
<td></td>
</tr>
<tr class="even">
<td><code>equals_exact</code></td>
<td>A와 B는 기하학적으로 동일하며, 노드 순서도 동일하다.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>intersects</code></td>
<td>A와 B가 완전 분리의 관계를 가지지 않는다.</td>
<td><code>disjoint</code></td>
</tr>
<tr class="even">
<td><code>is_within_distance</code></td>
<td>A가 주어진 거리보다 B에 더 가깝게 위치해 있다.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>within</code></td>
<td>B의 어떤 포인트도 A의 외부에 있지 않다.</td>
<td><code>contains</code></td>
</tr>
<tr class="even">
<td><code>touches</code></td>
<td>A와 B는 최소한 한 개의 경계 포인트를 공유한다. 내부 포인트를 공유하는 것은 아니다.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>overlaps</code></td>
<td>A와 B가 다수의 포인트를 공유한다. 디멘션은 A와 B의 디멘션과 동일하다.</td>
<td></td>
</tr>
<tr class="even">
<td><code>related</code></td>
<td>A와 B가 주어진 마스크 패턴을 준수하는지의 여부를 반환한다.</td>
<td></td>
</tr>
</tbody>
</table>
<p>위키피디어의 DE-9IM 페이지에서는 개별 동사에 해당하는 <code>relate</code> 마스크 패턴을 확인할 수 있다. 이는 <em>covers</em>와 <em>contains</em>와 같은 동사(혹은 그 반대 동사)의 의미가 직관적으로 이해하기 어려운 경우가 있기 때문이다.</p>
<ul>
<li><p>만일 A가 B를 <em>contains</em> 한다면, B는 A의 외부나 경계와 어떠한 공유 포인트도 없다.</p></li>
<li><p>만일 A가 B를 <em>covers</em> 한다면, B는 A의 외부와 어떠한 공유 포인트도 없다.</p></li>
</ul></section><section id="단항-측도" class="level3" data-number="3.2.3"><h3 data-number="3.2.3" class="anchored" data-anchor-id="단항-측도">
<span class="header-section-number">3.2.3</span> 단항 측도</h3>
<p>단항 측도는 지오메트리의 프로퍼티를 설명하는 측정값이나 양을 반환한다.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>측도</th>
<th>반환값</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>dimension</code></td>
<td>포인트는 0, 라인은 1, 폴리곤은 2, 엠프티 지오메트리에 대해서는 NA</td>
</tr>
<tr class="even">
<td><code>area</code></td>
<td>지오메트리의 면적</td>
</tr>
<tr class="odd">
<td><code>length</code></td>
<td>라인 지오메트리의 길이</td>
</tr>
</tbody>
</table></section><section id="이항-측도" class="level3" data-number="3.2.4"><h3 data-number="3.2.4" class="anchored" data-anchor-id="이항-측도">
<span class="header-section-number">3.2.4</span> 이항 측도</h3>
<p><code>distance</code>는 지오메트리 간의 거리를 반환한다. 질적 측도로서의 (마스크가 없는) <code>relate</code>는 관계 패턴을 제공한다. 두 지오메트리간의 기하학적 관련성에 대한 설명은 3.2.2절에 나타나 있다.</p>
</section><section id="단항-변환자" class="level3" data-number="3.2.5"><h3 data-number="3.2.5" class="anchored" data-anchor-id="단항-변환자">
<span class="header-section-number">3.2.5</span> 단항 변환자</h3>
<p>단항 변환자는 각 지오메트리에 작용하며, 새로운 지오메트리를 반환한다.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead><tr class="header">
<th>변환자</th>
<th>반환 지오메트리</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>centroid</code></td>
<td>투입 지오메트리의 센트로이드로 구성된 <code>POINT</code> 유형의 지오메트리</td>
</tr>
<tr class="even">
<td><code>buffer</code></td>
<td>투입 지오메트리보다 더 큰(혹은 더 작은) 지오메트리: 버퍼 사이즈에 따라 산출 지오메트리의 크기가 달라짐</td>
</tr>
<tr class="odd">
<td><code>jitter</code></td>
<td>이변량 균등 분포를 이용해 약간 위치가 변형된 지오메트리</td>
</tr>
<tr class="even">
<td><code>wrap_dateline</code></td>
<td>날짜 변경선을 더 이상 덮거나 교차하지 않는 조각들로 분할된 지오메트리</td>
</tr>
<tr class="odd">
<td><code>boundary</code></td>
<td>투입 지오메트리의 경계를 가진 지오메트리</td>
</tr>
<tr class="even">
<td><code>convex_hull</code></td>
<td>투입 지오메트리의 컨벡스 헐을 가진 지오메트리(역자주: 컨벡스 헐은 주어진 포인트 집합을 모두 포함하는 가장 작은 볼록 다각형을 의미한다.)</td>
</tr>
<tr class="odd">
<td><code>line_merge</code></td>
<td>
<code>MULTILINESTRING</code> 내의 <code>LINESTRING</code> 요소들을 결합하여 더 긴 <code>LINESTRING</code>을 형성한 지오메트리</td>
</tr>
<tr class="even">
<td><code>make_valid</code></td>
<td>밸리드하게 교정된 지오메트리</td>
</tr>
<tr class="odd">
<td><code>node</code></td>
<td>노드가 없는 교차점에 노드를 추가한 라인 지오메트리로 개별 라인 지오메트리에 적용</td>
</tr>
<tr class="even">
<td><code>point_on_surface</code></td>
<td>서피스에 임의의 포인트를 가진 지오메트리</td>
</tr>
<tr class="odd">
<td><code>polygonize</code></td>
<td>폐쇄 링을 형성하는 라인으로부터 생성된 폴리곤 지오메트리</td>
</tr>
<tr class="even">
<td><code>segmentize</code></td>
<td>주어진 밀도 또는 최소 거리를 만족하는 노드로 구성된 라인 지오메트리</td>
</tr>
<tr class="odd">
<td><code>simplify</code></td>
<td>버텍스/노드를 제거함으로써 단순화된 라인 혹은 폴리곤 지오메트리</td>
</tr>
<tr class="even">
<td><code>split</code></td>
<td>라인스트링에 의해 분할된 지오메트리</td>
</tr>
<tr class="odd">
<td><code>transform</code></td>
<td>새로운 CRS로 변환 혹은 전환된 지오메트리(2장)</td>
</tr>
<tr class="even">
<td><code>triangulate</code></td>
<td>들로네 삼각망으로 구성된 지오메트리(그림 3.3)(역자주: 들로네 삼각망은 보로노이 테셀레이션과 상호 대응하는 삼각분할 방법으로, 점들을 삼각형으로 연결하되, 삼각형의 외접원 안에 다른 점이 들어가지 않도록 한다)</td>
</tr>
<tr class="odd">
<td><code>voronoi</code></td>
<td>투입 지오메트리로부터 형성된 보로노이 테셀레이션(그림 3.3)(역자주: 보로노이 테셀레이션은 평면을 여러 구역으로 분할하는 방법으로, 각 구역 내의 모든 지점이 해당 구역의 중심점에 가장 가깝도록 정의된다.)</td>
</tr>
<tr class="even">
<td><code>zm</code></td>
<td>
<code>Z</code> 좌표 및 <code>M</code> 좌표가 수정된(일부 좌표의 삭제 혹은 새로운 좌표의 첨가) 지오메트리</td>
</tr>
<tr class="odd">
<td><code>collection_extract</code></td>
<td>특정 유형의 <code>GEOMETRYCOLLECTION</code>으로부터 일부를 추출한 지오메트리</td>
</tr>
<tr class="even">
<td><code>cast</code></td>
<td>유형이 전환된 지오메트리</td>
</tr>
<tr class="odd">
<td><code>+</code></td>
<td>주어진 벡터만큼 전위된 지오메트리</td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td>스칼라 또는 매트릭스가 곱해진 지오메트리</td>
</tr>
</tbody>
</table>
<div id="fig-3-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-vor-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-3" data-gallery="quarto-lightbox-gallery-3"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-vor-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.3: 포인트의 집합, 왼편은 컨벡스 헐, 가운데는 보로노이 폴리곤, 오른편은 들로네 삼각망
</figcaption></figure>
</div>
</section><section id="이항-변환자" class="level3" data-number="3.2.6"><h3 data-number="3.2.6" class="anchored" data-anchor-id="이항-변환자">
<span class="header-section-number">3.2.6</span> 이항 변환자</h3>
<p>이항 변환자는 두 지오메트리 쌍에 적용되어 새로운 지오메트리를 생성하는 함수이다. 다음과 같은 예가 있다.</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>함수</th>
<th>반환 지오메트리</th>
<th>인픽스 오퍼레이터</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>intersection</code></td>
<td>두 지오메트리의 겹치는 부분에 대한 지오메트리</td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td><code>union</code></td>
<td>두 지오메트리를 결합한 지오메트리로, 내부 경계를 제거하고, 중복되는 포인트, 노드, 또는 라인을 삭제</td>
<td><code>|</code></td>
</tr>
<tr class="odd">
<td><code>difference</code></td>
<td>두 번째 지오메트리와 중복되는 부분을 제거한 첫 번째 지오메트리</td>
<td><code>/</code></td>
</tr>
<tr class="even">
<td><code>sym_difference</code></td>
<td>중복되는 부분을 제거한 이후에 두 지오메트리를 결합한 지오메트리로 <code>intersection</code>의 반대</td>
<td><code>%/%</code></td>
</tr>
</tbody>
</table></section><section id="다항-변환자" class="level3" data-number="3.2.7"><h3 data-number="3.2.7" class="anchored" data-anchor-id="다항-변환자">
<span class="header-section-number">3.2.7</span> 다항 변환자</h3>
<p>다항 변환자는 지오메트리의 집합에 작용한다. <code>union</code>을 적용하면 모든 지오메트리를 결합한 결과를 얻을 수 있다. 이와 달리, 동일한 차원을 가진 지오메트리 집합은 <code>MULTI</code>-유형 지오메트리나 <code>GEOMETRYCOLLECTION</code>으로 결합할 수 있다. 이 경우, <code>union</code>을 적용하지 않으므로, 두 폴리곤 링이 경계선을 공유하는 경우처럼 밸리드하지 않은 지오메트리가 생성될 수 있다.</p>
<p>다항 <code>intersection</code>과 <code>difference</code>는 단일 인수를 받는 형식을 취하지만 모든 쌍, 세 쌍, 네 쌍 등에 대해 순차적으로 작동한다. 그림 3.4를 보자. 세 개의 상자가 모두 겹치는 영역을 어떻게 식별할 수 있을까? 이항 <code>intersection</code>을 사용하면 모든 쌍(1-1, 1-2, 1-3, 2-1, 2-2, 2-3, 3-1, 3-2, 3-3)에 대한 인터섹션을 얻을 수 있다. 그러나 두 개 이상의 지오메트리가 동시에 교차하는 영역을 식별할 수 없다. 그림 3.4 오른쪽은 다항 <code>intersection</code>을 보여주며, 한 개, 두 개, 혹은 <em>그 이상의</em> 지오메트리가 교차하여 생성된 7개의 상호 중복이 없는 고유 지오메트리를 확인할 수 있다.</p>
<div id="fig-3-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-boxes-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-4" data-gallery="quarto-lightbox-gallery-4"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-boxes-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.4: 왼쪽: 세 개의 정사각형이 서로 겹치고 있는데, 이들 모두가 겹치는 부분을 어떻게 확인할 수 있을까? 오른쪽: 상호 중복이 없는 고유한 다항 교차
</figcaption></figure>
</div>
<p>유사하게, 집합 <span class="math inline">\(\{s_1,s_2,s_3,...\}\)</span>에 다항 <code>difference</code>를 적용하여 <span class="math inline">\(\{s_1,s_2-s_1,s_3-s_2-s_1,...\}\)</span>를 생성할 수 있다. 결과는 그림 3.5에 나타나 있는데, 왼쪽에는 원래 집합을, 오른쪽에는 투입 지오메트리의 순서를 변경한 후의 집합을 보여준다. 이는 결과가 입력 지오메트리의 순서에 의존함을 명확히 하기 위한 것이다. 결과로 얻어진 지오메트리들은 서로 겹치지 않는다.</p>
<div id="fig-3-5" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-diff-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-5" data-gallery="quarto-lightbox-gallery-5"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-diff-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.5: 박스들에 서로 다른 순서로 <code>differece</code>를 적용한 결과: 왼쪽은 원래 순서이며, 오른편은 반대 순서
</figcaption></figure>
</div>
</section></section><section id="정밀도" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="정밀도">
<span class="header-section-number">3.3</span> 정밀도</h2>
<p>기하학적 오퍼레이션, 예를 들어 특정 점이 선 위에 있는지 여부를 판단하는 작업은 R에서 사용하는 8바이트 더블과 같은 배정밀도 부동소수점 수로 좌표가 표현될 때 실패할 수 있다. 흔히 선택되는 해결책은 연산 전에 좌표의 정밀도를 제한하는 것이며, 이를 위해 정밀도 모형이 사용된다. 가장 일반적인 방법은 하나의 계수 <span class="math inline">\(p\)</span>를 선택하고, 원래 좌표 <span class="math inline">\(c\)</span>를 반올림하여 새로운 <span class="math inline">\(c'\)</span>를 계산하는 것이다.</p>
<p><span class="math display">\[
c'=\text {round} (p\cdot c)/p
\]</span></p>
<p>이러한 종류의 반올림은 좌표를 간격이 <span class="math inline">\(1/p\)</span> 인 규칙적인 그리드 상의 점으로 변환하며, 이는 기하학적 연산에 유용하다. 그러나 이 반올림은 면적이나 거리와 같은 모든 계산에 영향을 미치며, 밸리드 지오메트리를 무효화할 수 있다. 어떤 정밀도 값이 특정 응용 분야에 가장 적합한지는 일반적으로 경험과 시행착오를 통해 결정된다.</p>
</section><section id="커버리지-테셀레이션과-래스터" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="커버리지-테셀레이션과-래스터">
<span class="header-section-number">3.4</span> 커버리지: 테셀레이션과 래스터</h2>
<p>OGC(Open Geospatial Consortium, 오픈지리공간컨소시움)는 <em>커버리지</em>(coverage)를 “시공간 도메인 내 임의의 직접 위치에 대해 그 범위에서 값을 반환하는 함수 역할을 하는 피처”라고 정의한다(Baumann, Hirschorn, and Masó 2017). <em>함수</em>가 존재한다는 것은 시공간 도메인 내 모든 ‘포인트’, 즉 특정 지점과 특정 시점의 모든 조합에 대해 범위 내의 <em>단일</em> 값을 얻을 수 있다는 것을 의미한다.(역자주: 범위는 함수가 반환하는 값들의 집합을 의미하는데, 함수는 시공간 내 위치별로 이 범위 안에서 값을 반한한다는 의미이다.) 이는 시공간적 현상에서 매우 흔히 나타나는 상황으로, 몇 가지 예를 들 수 있다.</p>
<ul>
<li>경계 분쟁을 제외하면, 특정 시점의 특정 지역 내 모든 지점(도메인)은 단일 행정 단위(범위)에 속한다.</li>
<li>특정 시점의 특정 지역 내 모든 지점(도메인)은 특정한 토지피복 유형(범위)을 갖는다.</li>
<li>특정 지역(도메인)의 모든 지점은 단일한 고도값(범위)을 가지며, 이는 보통 주어진 평균 해수면을 기준으로 측정된다.</li>
<li>3차원 기체의 모든 시공간적 지점(도메인)은 온도(범위)에 대해 단일 값을 갖는다.</li>
</ul>
<p>여기서 주의할 점은, 관찰이나 측정에는 항상 시간과 공간이 소요되므로, 측정된 값은 본질적으로 시공간적 부피(volume)에 대한 평균값일 수밖에 없다는 것이다. 따라서 범위 변수를 무부피의 ’포인트’에서 직접 측정하는 경우는 매우 드물다. 그러나 실제 많은 사례에서 측정된 부피는 ’포인트’로 간주할 만큼 충분히 작다. 예를 들어, <em>토지 피복</em> 유형과 같은 변수는 구별되는 유형이 측정된 면적 단위와 의미 있게 연관되도록 적절한 부피 단위를 선택해야 한다.(역자주: 토지 피복 유형과 같은 범주형 변수는 측정된 면적 단위(부피)와 의미 있게 연관되어야 한다. 즉, 구분되는 토지 피복 유형들이 관찰된 공간 범위 내에서 충분히 대표성을 가지도록 적절한 공간 단위로 측정되어야 한다는 의미이다.)</p>
<p>위에서 주어진 네 가지 예들 중 처음 두 가지에서 범위 변수는 <em>범주형</em>이며, 마지막 두 가지에서는 <em>연속형</em>이다. 범주형 범위 변수의 경우, 넓은 지역이 동일한 값을 가지면, 이러한 데이터를 효율적으로 표현하는 방법은 동일한 값을 가진 지역의 경계를 저장하는 것이다. 예를 들어, 국가 경계가 이에 해당한다. 이는 심플 피처 지오메트리(폴리곤 또는 멀티폴리곤)를 사용하여 표현할 수 있으나, 이로 인해 몇 가지 도전 과제가 발생할 수 있다.</p>
<ul>
<li><p>심플 피처 폴리곤들이 서로 겹치지 않고 틈새도 없어야 하지만, 이러한 조건이 항상 보장된다고는 할 수 없다.</p></li>
<li><p>심플 피처는 인접한 두 폴리곤의 경계에 위치한 포인트를 하나의 폴리곤에만 할당할 수 없는데, 이는 커버리지로서의 해석과 충돌한다.</p></li>
</ul>
<section id="토폴로지-모형" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="토폴로지-모형">
<span class="header-section-number">3.4.1</span> 토폴로지 모형</h3>
<p>폴리곤 커버리지의 겹침과 틈새가 없도록 보장하는 데이터 모형을 <em>토폴로지</em> 모형이라고 하며, GRASS GIS나 ArcGIS와 같은 지리정보시스템(GIS)에서 그 예를 찾아볼 수 있다. 토폴로지 모형은 폴리곤 경계를 한 번만 저장하고, 경계의 양쪽에 위치한 폴리곤을 등록한다.</p>
<p>토폴로지 모형에서 동일한 범위 값을 가진 지역들에 대해 (멀티)폴리곤 집합을 도출하는 것은 간단하다. 하지만 폴리곤의 집합으로부터 토폴로지를 재정의하는 역과정을 수행하려면 오류에 대한 임계값 설정과 겹침 및 틈새를 처리하는 구체적인 방법을 고려해야 한다.</p>
</section><section id="래스터-테셀레이션" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="래스터-테셀레이션">
<span class="header-section-number">3.4.2</span> 래스터 테셀레이션</h3>
<p>테셀레이션은 2차원 또는 3차원의 공간을 폴리곤으로 구성된 더 작은 요소들로 세분화하는 것을 의미한다. 규칙 테셀레이션은 삼각형, 사각형, 육각형과 같은 규칙 폴리곤으로 이루어진 테셀레이션을 뜻한다. 공간데이터에서 일반적으로 사용되는 정사각형 기반 테셀레이션을 래스터 데이터라고 부른다. 래스터 데이터는 공간 차원 <span class="math inline">\(d\)</span>를 규칙 셀로 나누며, 각 셀 <span class="math inline">\(d_i\)</span> 는 좌측 닫힘 및 우측 개방 범위(구간)로 정의된다.(역자주: 좌측 닫힘 우측 개방 범위란 구간의 왼쪽 끝점은 포함하지만, 오른쪽 끝점은 포함하지 않는다는 의미이다.)</p>
<p><span class="math display">\[
d_i=d_0+[i\times \delta,(i+1)\times \delta)
\]</span></p>
<p>여기서 <span class="math inline">\(d_0\)</span>는 오프셋값며, <span class="math inline">\(\delta\)</span>는 구간(셀 또는 픽셀) 크기이다. 셀 인덱스인 <span class="math inline">\(i\)</span>는 임의의 값을 가질 수 있으나 연속적인 정수여야 한다. <span class="math inline">\(\delta\)</span>는 <span class="math inline">\(y\)</span>-축(북거)의 경우 보통 음수 값을 가지는데, 이는 래스터의 행 번호가 남쪽으로 갈수록 증가하는 반면 <span class="math inline">\(y\)</span>-좌표값은 감소하는 것과 보조를 맞추기 위함이다.</p>
<p>일반적인 폴리곤 테셀레이션에서는 두 폴리곤이 공유하는 경계에 위치한 점의 할당이 모호할 수 있으나, 규칙 테셀레이션에서는 좌측 닫힘(“[”) 및 우측 개방(“)”) 구간을 사용하여 이러한 모호성을 해소한다. 이는 <span class="math inline">\(y\)</span>-좌표에 음의 <span class="math inline">\(\delta\)</span>값이 <span class="math inline">\(x\)</span>-좌표에 양의 <span class="math inline">\(\delta\)</span>값이 적용된 적용된 래스터의 경우 각 셀의 모서리 점들 중 좌측 상단의 것만이 해당 셀의 일부로 간주된다는 의미이다. 이로 인해 발생할 수 있는 예기치 못한 결과 중 하나가 그림 3.6에 나타나 있다.</p>
<div id="fig-3-6" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-3-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-rasterizeline-1.png" class="lightbox" data-glightbox="description: .lightbox-desc-6" data-gallery="quarto-lightbox-gallery-6"><img src="https://r-spatial.org/book/03-Geometries_files/figure-html/fig-rasterizeline-1.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;3.6: 래스터화의 예기치 못한 결과: 각 셀의 좌측 상단 지점만 셀 내부로 간주되기 때문에, 대각선 아래에 위치하면서 붉은 선과 접촉한 셀들도 래스터로 전환되었다.
</figcaption></figure>
</div>
<p>시간 차원을 좌측 닫힘 및 우측 개방 구간으로 세분하는 것은 매우 일반적인 방식이며, 이는 R의 <strong>xts</strong> 패키지와 같은 시계열 소프트웨어의 암묵적인 기본 가정이다. 즉, 시간 스탬프(시점)는 시간 간격의 시작을 나타낸다. 다른 모형도 결합될 수 있다. 예를 들어, 심플 피처 폴리곤을 사용해 공간을 세분하고, 이를 규칙 시간 테셀레이션과 결합하여 시공간 벡터 데이터 큐브 개념을 구현할 수 있다. 래스터 및 벡터 데이터 큐브에 관한 논의는 6장에서 다룬다.</p>
<p>위에서 언급한 것처럼, <span class="math inline">\(R^2\)</span>에 대한 규칙 테셀레이션을 생성할 때는 정사각형 외에도 삼각형과 육각형 폴리곤을 활용할 수 있다. 3차원 구체로 확장하면 큐브, 정팔면체, 정이십면체, 정십이면체 등 다양한 형태가 포함된다. 큐브 기반 공간 인덱스는 s2geometry이며, H3 라이브러리는 정이십면체를 기반으로 하면서 밀집화 과정에 주로 육각형을 사용한다. 지구 전체를 포괄하는 이러한 모자이크는 일반적으로 <em>이산 글로벌 그리드</em>(discrete global grid)라고 불린다.</p>
</section></section><section id="네트워크" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="네트워크">
<span class="header-section-number">3.5</span> 네트워크</h2>
<p>공간적 네트워크는 일반적으로 라인(<code>LINESTRING</code>) 요소로 구성되지만, 네트워크로서의 완결성을 위해 추가적인 위상적 특성을 가진다.</p>
<ul>
<li><p>라인스트링의 시작점과 끝점은 다른 라인스트링의 시작점이나 끝점에 연결될 수 있으며, 이를 통해 노드와 엣지의 집합이 형성된다.</p></li>
<li><p>엣지는 방향성을 가질 수 있으며, 이 경우 연결(흐름, 수송)은 한 방향으로만 가능하다.</p></li>
</ul>
<p><strong>osmar</strong>(Schlesinger and Eugster 2013), <strong>stplanr</strong>(Lovelace, Ellison, and Morgan 2022), <strong>sfnetworks</strong>(van der Meer et al.&nbsp;2022)와 같은 R 패키지는 네트워크 객체를 구성하고 이를 다루는 기능을 제공하며, 네트워크를 통한 최단 또는 최속 경로 계산을 지원한다. <strong>spatstat</strong> 패키지(Baddeley, Turner, and Rubak 2022; Baddeley, Rubak, and Turner 2015)는 선형 네트워크 상에서도 포인트 패턴 분석 기능을 제공한다(11장). Lovelace, Nowosad, and Muenchow(2019)의 12장은 네트워크 데이터를 활용한 교통 애플리케이션을 다룬다.</p>
</section><section id="연습문제" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="연습문제">
<span class="header-section-number">3.6</span> 연습문제</h2>
<p>다음의 연습문제를 풀되, 적절한 부분에서 R을 활용하라.</p>
<ol type="1">
<li><p>2차원(평면) 공간에서 심플 피처 지오메트리로 표현할 수 없는 지오메트리의 두 가지 예를 제시하고, 그림으로 표현하시오.</p></li>
<li><p>좌표 10.542, 0.01, 45321.6789를 정밀도 값 1, 1e3, 1e6, 및 1e-2를 사용하여 재계산하시오.</p></li>
<li><p>다항 인터섹션이 필요한 실제 문제 사례를 제시하시오.</p></li>
<li><p>지점별로 하나의 폐쇄 폴리곤을 가지는 보로노이 다이어그램(그림 3.3)을 만드는 방법을 설명하시오.</p></li>
<li><p>다음의 지오메트리에 대해 단항 측도 <code>dimension</code>을 계산하시오. <code>POINT Z (0 1 1)</code>, <code>LINESTRING Z (0 0 1,1 1 2)</code>, <code>POLYGON Z ((0 0 0,1 0 0,1 1 0,0 00))</code></p></li>
<li><p><code>LINESTRING(0 0,1 0)</code>과 <code>LINESTRING(0.5 0,0.5 1)</code>의 DE-9IM 관계를 설명하고, 각 문자의 의미도 함께 설명하시오.</p></li>
<li><p>심플 피처 폴리곤의 집합을 하나의 커버리지를 만들 수 있는지 답하시오. 가능하다면, 어떤 제약 조건에서 가능한지 설명하시오.</p></li>
<li><p><strong>sf</strong> 패키지의 <code>nc</code> 카운티 데이터를 사용하여 네 개의 카운티가 동시에 접촉하는 포인트들을 추출하시오.</p></li>
<li><p><span class="math inline">\(y\)</span>-축에 대한 <span class="math inline">\(\delta\)</span>값이 양수일 경우, 그림 3.6은 어떻게 달라지는지 설명하시오.</p></li>
</ol>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">그림&nbsp;3.1: 심플 피처 지오메트리의 주요 유형</span>
<span class="glightbox-desc lightbox-desc-2">그림&nbsp;3.2: DE-9IM: 폴리곤의 내부, 경계, 외부(행)와 라인의 내부, 경계, 외부(열) 간의 인터섹션(빨간색으로 표시)</span>
<span class="glightbox-desc lightbox-desc-3">그림&nbsp;3.3: 포인트의 집합, 왼편은 컨벡스 헐, 가운데는 보로노이 폴리곤, 오른편은 들로네 삼각망</span>
<span class="glightbox-desc lightbox-desc-4">그림&nbsp;3.4: 왼쪽: 세 개의 정사각형이 서로 겹치고 있는데, 이들 모두가 겹치는 부분을 어떻게 확인할 수 있을까? 오른쪽: 상호 중복이 없는 고유한 다항 교차</span>
<span class="glightbox-desc lightbox-desc-5">그림&nbsp;3.5: 박스들에 서로 다른 순서로 <code>differece</code>를 적용한 결과: 왼쪽은 원래 순서이며, 오른편은 반대 순서</span>
<span class="glightbox-desc lightbox-desc-6">그림&nbsp;3.6: 래스터화의 예기치 못한 결과: 각 셀의 좌측 상단 지점만 셀 내부로 간주되기 때문에, 대각선 아래에 위치하면서 붉은 선과 접촉한 셀들도 래스터로 전환되었다.</span>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "복사완료!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "복사완료!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./02.html" class="pagination-link  aria-label=">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">좌표계</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04.html" class="pagination-link" aria-label="<span class='chapter-number'>4</span>&nbsp; <span class='chapter-title'>구체 지오메트리</span>">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">구체 지오메트리</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sangillee66/book_sds_trans/issues/new" class="toc-action"><i class="bi bi-github"></i>이슈 보고</a></li></ul></div></div></div></footer><script>var lightboxQuarto = GLightbox({"descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox","closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>


</body></html>