{
  "hash": "db242336c936709ffb3f1e659f7466ad",
  "result": {
    "engine": "knitr",
    "markdown": "---\ndate-modified: last-modified\nnumber-sections: true\nformat: \n  html: \n    toc: true\ncode-link: true\ncode-copy: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\n---\n\n\n# 속성과 서포트 {#sec-attribute}\n\n피처 *속성*(attribute)은 피처(즉 '사물')의 특성을 의미한다. 피처의 지오메트리 자체는 속성으로 간주되지 않지만, 일부 속성은 지오메트리로부터 *파생*될 수 있다. 예를 들어, `LINESTRING`의 길이나 `POLYGON`의 면적은 이러한 공간 파생 속성에 해당한다. 그러나 많은 속성은 다음과 같이 지오메트리로부터 직접 도출되지 않는 비도출 속성이다.\n\n-   거리나 카운티의 이름\n\n-   카운티의 인구수\n\n-   도로의 유형\n\n-   토양 유형\n\n-   가게의 영업 개시 시간\n\n-   동물의 체중 또는 심박수\n\n-   대기질 측정소의 이산화질소 농도\n\n어떤 경우에는 시간적 특성이 피처의 속성으로 간주될 수 있다. 예를 들어, 사람의 출생일이나 도로의 건설 연도가 이에 해당한다. 대기질과 같이 속성이 공간과 시간의 함수로 표현되는 경우, 시간은 기하학적 특성과 동등한 중요성을 지니는 요소로 다루는 것이 가장 적절하다. 이러한 내용은 6장에서 데이터 큐브와 관련하여 더 자세히 다룬다.\n\n심플 피처를 구현하는 공간데이터사이언스 소프트웨어는 일반적으로 피처의 기하학적 특성과 속성을 모두 포함하는 테이블 형태로 데이터를 구성한다. 이는 Python의 `Geopandas`, PotsgreSQL의 `PostGIS` 테이블, R의 `sf` 객체 모두에 해당된다. 3.2절에서 설명된 기하학적 오퍼레이션은 *오직* 지오메트리에만 적용되며, 경우에 따라 새로운 속성(프리디케이트, 측도, 변환)을 생성할 수 있지만 기존 속성에는 영향을 미치지 않는다.\n\n지오메트리가 변경되었음에도 속성 *값*이 그대로 유지되는 경우, 서포트 문제가 발생할 수 있다. 예를 들어 카운티 폴리곤을 해당 폴리곤의 센트로이드로 대체하는 간단한 사례를 살펴보면, R의 **sf** 패키지는 다음과 같은 경고 메시지를 출력한다.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: st_centroid assumes attributes are constant over geometries\n```\n\n\n:::\n:::\n\n\n이러한 경고 메시지가 나타나는 이유는 데이터셋에 전체 폴리곤과 연관된 값을 가진 변수들이 포함되어 있기 때문이다.(역자주: 여기서 ‘전체 폴리곤과 연관된 값’이란, 폴리곤 내부의 모든 지점이 동일한 값을 가진다는 의미가 아니라, 폴리곤 전체에 대한 합계나 총빈도를 나타내는 값을 뜻한다.) 예를 들어, 인구수와 같은 값은 폴리곤 전체와 관련된 것이므로, 폴리곤을 대체하는 `POINT` 지오메트리와는 직접적인 연관이 없다.\n\n1.6절에서 이미 언급했듯이, 라인과 폴리곤 지오메트리에서 피처 속성 값은 *포인트 스포트* 또는 *블록 스포트*를 가질 수 있다. 포인트 스포트는 해당 값이 지오메트리의 *모든 지점*에 동일하게 적용되는 경우를 말하고, 블록 서포트는 지오메트리 내 *모든 지점을 요약*하는 경우를 의미한다. 이 외에도 해당 지오메트리보다 더 작거나 더 큰 서포트를 가지는 경우도 가능하다.\n\n이 장에서는 속성이 지오메트리와 관련되는 방식, 이러한 차이가 데이터 분석에 미치는 영향, 그리고 서로 다른 지오메트리로부터 속성을 도출하는 방법(상향 스케일링과 하향 스케일링)에 대해 설명한다.\n\n## 속성-지오메트리 관계와 서포트\n\n피처 속성은 변경하지 않고 피처의 기하 특성만 수정하더라도, *피처*는 변한 것으로 간주된다. 이는 피처가 지오메트리와 속성의 결합으로 구성되기 때문이다. 예를 들어, 지오메트리를 컨벡스 헐이나 센트로이로 대체했을 때, 새롭게 생성디는 피처가 기존 속성 값과 의미 있게 관계를 유지할 수 있을까? 이 답은 상황에 따라 다르다.\n\n`LINESTRING` 지오메트리를 갖는 도로망을 예로 들어보자. 데이터셋에 도로 폭이라는 속성이 포함되어 있고, 어떤 도로의 속성값이 10m라고 하자. 그렇다면 해당 도로의 특정 구간의 도로 폭에 대해 우리는 무엇을 말할 수 있을까? 이는 도로 폭 속성이 도로의 모든 지점에서 동일한 폭을 의미하는지(즉, 폭이 일정하다는 것을 의미하는지), 아니면 최소값이나 평균값과 같은 집계 속성을 의미하는지에 따라 달라진다. 최소값의 경우를 좀 더 살펴보자. 최소 도로 폭은 해당 도로에서 임의로 특정 구간을 선택했을 때, 그 구간의 최소 폭이 주어진 최소 도로 폭보다 작지 않음을 의미한다. 그러나 이것이 반드시 그 하위 구간의 최소 폭을 뜻하는 것은 아니다. 이 사례는 속성-지오메트리 관계(**AGR**, attribute-geometry relationship)가 두 가지 *유형*으로 구분될 수 있음을 보여한다.\n\n-   **상수**(constant) AGR: 속성값이 지오메트리의 모든 부분에 동일하게 적용된다. 즉, 피처가 무수히 많은 지점으로 구성되어 있고, 각 지점이 동일한 속성값을 가지는 경우를 말한다. 지구통계학에서는 이를 *포인트 서포트*를 가진 변수라고 부른다.\n\n-   **집계**(aggregate) AGR: 속성값이 지오메트리 전체를 요약한 값이다. 즉, 피처가 하나의 관측값을 가지며, 그 값이 지오메트리 전체를 대표하는 경우를 말한다. 지구통계학에서는 이를 *블록 서포트*를 가진 변수라고 부른다.\n\n폴리곤 데이터의 경우, **상수** AGR(포인트 서포트)의 예로 다음을 변수를 들 수 있다.\n\n-   토지이용도에서의 토지이용\n\n-   지질도에서의 암석 단위 또는 지질층\n\n-   토양도에서의 토양 유형\n\n-   기복도에서의 고도 클래스\n\n-   기후 구분도에서의 기후 지역\n\n상수 AGR 변수의 전형적인 특성은 지오메트리가 인위적으로 생성된 것이 아니며, 센서 장치(예: 원격탐사의 이미지 픽셀 경계)와도 관련이 없다는 것이다. 대신, 지오메트리는 관찰된 변수를 매핑함으로써 결정된다. **집계** AGR의 예로는 다음과 같은 변수를 들 수 있다.\n\n-   인구: 인구수 혹은 인구밀도\n\n-   지역별로 요약된 사회경제적 변수\n\n-   원격탐사 픽셀별 평균 반사율\n\n-   지역별 총 오염물질 배출량\n\n-   이산화질소 농도에 대한 블록 평균: 보통 정사각형 블록에 대한 블로 크리깅(12.5절) 또는 구역 평균값을 예측하는 분산 모형을 통해 산출된다.\n\n집계 AGR 변수의 전형적인 특성은, 그 지오메트리가 법률적 규정, 관측 장치, 분석상의 선택 등에서 비롯된 것이며, 관찰 변수 그 자체와 본질적으로 연결되어 있지는 않다는 점이다.\n\n세 번째 유형의 AGR는 속성이 피처 지오메트리의 식별자 역할을 하는 경우에 해당한다. 개별 지오메트리가 변수의 특정 값과 고유하게 연결되어 있을 때, 이를 **식별** 변수라고 한다. 즉, 동일한 값을 가지는 다른 지오메트리가 존재하지 않는 경우다. 예를 들어, 카운티 이름은 해당 카운티를 식별하며, 카운티 내 어떤 하위 지역에도 동일한 이름이 적용될 수 있다(포인트 서포트). 그러나 임의의 하위 구역을 고려하면, 이 변수는 더 이상 식별자의 역할을 하지 못하고 단순한 **상수** 속성값으로 변하게 된다. 하나의 예를 들면 다음과 같다.\n\n-   카운티 내부의 임의의 지점(또는 지역)은 여전히 그 카운티에 속하므로 '카운티 이름' 변수에서 동일한 값을 가져야 한다. 그러나 해당 지점(또는 지역)은 더 이상 카운티 전체 지오메트리를 대표하는 식별자로 기능할 수 없다.\n\n여기서 중요한 점은, 공간정보가(단순화를 위해 시간은 무시한다고 할 때) 서로 다른 현상 유형으로 구분될 수 있다는 것이다(Scheider et al. 2016).\n\n-   **필드**: *연속적인* 공간상의 모든 지점이 특정 속성값을 가지는 경우(예를 들어, 고도, 대기질 또는 토지이용)\n\n-   **객체**: 위치의 *이산적* 집합으로 규정되는 경우(예를 들어, 주택, 나무, 사람)\n\n-   **집계값**: 필드의 총계 또는 평균, 라인 혹은 폴리곤 객체의 총빈도 혹은 밀도로 계산되는 값\n\n그러나 이러한 현상 유형이 지오메트리 유형(포인트, 라인, 폴리곤, 래스터 셀)과 일대일로 대응하는 것은 아니다.\n\n-   포인트는 필드에서의 샘플링 위치일 수도 있고(예: 대기질 관측 지점), 객체의 위치일 수도 있다.\n\n-   라인은 객체(예: 도로, 강)일 수도 있고, 필드를 나타내는 등치선일 수도 있으며, 행정구역의 경계일 수도 있다.\n\n-   래스터 픽셀과 폴리곤은 토지이용(*커버리지*)과 같은 범주형 필드와 연관될 수도 있고, 인구밀도와 같은 집계값과도 관련될 수 있다.\n\n-   래스터나 다른 형태의 메시 삼각망은 노드(포인트), 엣지(라인), 페이스(에어리어, 셀)에 각각 다른 변수를 가질 수 있다. 스태거드(staggered) 그리드를 이용해 편미분 방정식을 근사하는 경우(Haltiner and Williams 1980; Collins et al. 2013)가 이에 해당한다.\n\n속성-지오메트리 관계를 적절히 정의하고, 이에 대한 정보가 누락되었거나 지오메트리의 변화(즉, 서포트의 변화)가 정보 변화를 초래하는 경우 경고 메시지를 표출하는 것은, 공간데이터의 *서포트*와 관련된 일반적인 공간데이터 분석 오류(Stasch et al. 2014)를 피하는 데 도움이 될 수 있다.\n\n## 애그리게이션과 서머라이즈\n\n테이블 레코드의 애그리게이션(aggregation)은 다음의 두 단계를 통해 수행된다.\n\n-   그룹 프레디케이트에 따라 레코드를 분류한다.\n\n-   애그리게이션 함수를 적용하여 각 그룹별 단일 요약 속성값을 계산한다.\n\nSQL에서 애그리게이션 과정은 다음의 예시처럼 이루어진다.\n\n`SELECT GroupID, SUM(population) FROM table GROUP BY GroupID;`\n\n여기서 애그리게이션 함수는 `SUM`이고 그룹 프레디케이트는 `GroupID`이다.\n\nR의 **dplyr** 패키지는 이 작업을 두 단계로 수행한다. `group_by()` 함수는 레코드의 그룹 멤버십을 지정하고, `summarise()` 함수는 각 그룹에 대한 데이터 요약(예: 합계나 평균)을 계산한다. 반면 베이스 R의 `aggregate()` 함수는 테이블, 그룹화 조건, 집계 함수를 인수로 받아 이 두 단계를 하나의 함수 호출로 처리한다.\n\n노스캐롤라이나 카운티의 예는 그림 5.1에 제시되어 있다. 타원 좌표 `POINT`(-79, 35.5)를 기준점으로 사분면을 설정하고, 각 카운티의 센트로이드가 속한 사분면에 따라 카운티를 그룹화한 뒤, 각 그룹별로 질병 사례 수를 합산하였다. 그 결과, 그룹별로 통합된 지오메트리가 생성되었음을 확인할 수 있다(3.2.6절 참조). 이러한 그룹별 애그리게이션은 필수적이다. 만약 카운티 지오메트리를 단순히 결합하여 `MULTIPOLYGON`을 생성했다면, 수 많은 중복 경계가 발생하여 밸리드하지 않은 지오메트리가 생성되었을 것이기 때문이다(3.1.2절 참조).\n\n\n::: {.cell}\n\n:::\n\n\n![SID74가 네 개의 지역별로 합산되었다.](https://r-spatial.org/book/05-Attributes_files/figure-html/fig-ncaggregation-1.png){#fig-5-1}\n\n결합된 카운티 폴리곤을 지도로 표현하는 데 기술적인 문제는 없지만, 그룹 합계가 그룹화된 카운티가 아니라 개별 카운티에 해당하는 값이라는 잘못된 인상을 줄 수 있다. 이러한 방식의 애그리게이션의 특징은 각 레코드가 하나의 그룹에만 할당된다는 점이다. 이로 인해 그룹별 합계의 총합이 그룹화 이전 데이터의 총합과 동일하다는 유지되는 장점이 있다. 즉, 정량 변수의 경우 정보가 손실되거나 추가되지 않는다. 새로 생성된 지오메트리는 원래 레코드의 지오메트리를 그룹 단위로 유니온(union)한 결과이다.\n\n\n::: {.cell}\n\n:::\n\n\n![노스케롤라이나 카운티 상의 타깃 블](https://r-spatial.org/book/05-Attributes_files/figure-html/fig-ncblocks-1.png){#fig-5-2}\n\n지오메트리를 결합하지 않고도 그룹별 합산값을 계산해야 하는 경우가 있다. 이때는 공간 프레디케이트를 사용하며, 하나의 레코드가 여러 그룹과 연관될 수 있다. 예를 들어, 그림 5.2에서 직사각형을 타깃 에어리어로 설정하고, 각 직사각형과 인터섹션 관계에 있는 카운티의 유병자를 합산하면 전체 합계는 훨씬 더 크게 나타날 것이다.\n\n\n::: {.cell}\n\n:::\n\n\n``` r\n#   sid74_sum_counties sid74_sum_rectangles \n#                  667                 2621\n```\n\n반대로 *contains*나 *covers*와 같은 다른 프레디케이트를 사용하면 훨씬 작아진다. 이는 많은 카운티가 직사각형 안에 완전히 포함되지 않기 때문이다. 그러나 이러한 결과가 오히려 바람직할 수 있는 상황도 있다. 예를 들어, 다음과 같은 경우가 이에 해당한다.\n\n-   `POINT` 지오메트리를 폴리곤 단위로 애그리게이션하는 경우: 모든 포인트는 자신을 완전히 폴리곤에 할당된다. DE-9IM-기반 GEOG 라이브러리는 이 방식을 사용하며, s2geometry 라이브러리는 '반-개방(semi-open)' 폴리곤을 지정할 수 있게 하여, 폴리곤이 중첩되지 않는 한반드시 하나의 폴리곤에 포인트를 할당한다.\n\n-   작은 폴리곤이나 래스터 픽셀을 더 큰 에어리어로 애그리게이션하는 경우: 예를 들어, 노스케롤라이나의 30m 해상도의 고도 데이터를 카운티별로 평균낼 때, 다중 매치로 인한 데이터 오류는 무시할 수 있을 정도로 작다.(역자주: 이는 하나의 폴리곤이나 픽셀 데이터가 여러 카운티에 중복 합산되는 경우를 의미한다.)\n\n-   다대다(many-to-many) 매치에서 최대 면적 매치(single largest area match)가 적용된 경우(그림 7.4 참조)(역자주: 최대 면적 매치란, 겹치는 영역 중 면적이 가장 큰 영역에 모든 값을 할당하는 방식을 의미한다.)\n\n보다 작은 에어리어를 보다 큰 에어리어로 합역하는 보다 포괄적인 접근 방법은 면적-가중 인터폴레이션을 적용하는 것이다.\n\n## 면적-가중 인터폴레이션\n\n두 개의 데이터셋의 지오메트리와 속성을 결합하여, 소스 데이터셋의 속성값을 타겟 데이터셋의 지오메트리에 기반한 요약값으로 변환하고자 한다면, 면적-가중 인터폴레이션(area-weighted interpolation)이 가장 간단한 접근 방법이 될 수 있다. 이 방법은 소스와 타겟의 지오메트리가 겹치는 면적을 고려하여, 소스 속성값을 타겟 속성값으로 전환하기 위한 가중치로 활용한다(Goodchild and Lam 1980; Do, Thomas-Agnan, and Vanhems 2015a, 2015b; Do, Laurent, and Vanhems 2021). 이 기법은 보수적 합역(conservative region aggregation) 또는 재그리딩(regridding)으로도 알려져 있다(Jones 1999). 여기서는 Do, Thomas-Agnan, and Vanhems(2015b)의 표기법을 따르도록 한다.\n\n면적-가중 인터폴레이션은 타깃 에어리어 $T_j$에 대한 가중평균값을 산출한다. 이 값은 $T_j$와 겹치는 $p$개의 소스 구역 $S_i$의 속성값 $Y_i$에 대한 가중평균으로 계산된다.\n\n$$\n\\hat Y_j(T_j)=\\sum\\limits_{ij}^pw_{ij}Y_i(S_i)\n$$ {#eq-5-1}\n\n여기서 $w_{ij}$는 $T_j$와 $S_i$의 겹침의 정도에 따라 달라지며, 겹침 정도는 $A_{ij}=T_j\\cap S_i$로 표현된다. $w_{ij}$와 $A_{ij}$의 관계는 아래에서 자세히 설명한다.\n\n가중치를 계산하는 방법에는 여러 가지가 있으며, 외부 변수를 활용하는 방법(예: 대시메트릭 매핑, Mennis 2003 참조)도 그중 하나이다. 외부 변수를 사용하지 않고 가중치를 계산하는 단순한 방법은 두 가지가 있으며, 변수 $Y$가 공간 *외연*(extensive) 변수인지 공간 *내포*(intensive) 변수인지에 따라 달라진다.\n\n### 공간 외연 변수와 공간 내포 변수\n\n공간 외연 변수(spatially extensive variable)는 길이, 면적, 부피, 카운트(count)와 같이 물리적 크기와 관련된 양을 나타낸다. 대표적인 예로 인구 수를 들 수 있다. 인구 수는 특정 크기의 영역과 관련된 값이며, 해당 영역을 더 작은 영역으로 분할하면 인구 수도 함께 분할되어야 한다. 인구가 공간적으로 균일하지 분포하지 않은 경우가 많기 때문에, 이 분할이 반드시 면적에 비례할 필요는 없지만, 더 작은 영역의 인구 수 합계는 전체 영역의 인구 수와 일치해야 한다.\n\n공간 내포 변수(spatially intensive variable)는 영역의 면적에 비례하여 변하지 않는 변수이다. 즉, 영역이 분할되더라도 평균적인 의미에서 값이 그대로 유지된다. 대표적인 예로 인구밀도를 들 수 있다. 영역을 더 작은 영역으로 분할하더라도 연구밀도 값이 면적에 비례하여 할당되지는 않는다. 더 작은 영역들의 인구밀도를 합산한 값은 아무런 의미가 없으며, 이들 인구밀도의 평균이 전체 영역의 인구밀도와 유사하게 나타날 것이다.\n\n공간 외연 변수 $Y$가 공간상에 균등하게 분포한다고 가정하면, 소스 데이터의 구역 $S_i$에 대한 변수값 $Y_i$로부터, 타깃 구역과의 겹침으로 생성된 하위 구역($A_{ij}=T_j\\cap S_i$)의 속성값 $Y_{ij}$는 다음과 같이 계산할 수 있다.\n\n$$\n\\hat Y_{ij}(A_{ij})=\\frac{|A_{ij}|}{|S_i|}Y_i(S_i)\n$$\n\n여기서 $|\\cdot|$는 면적을 의미한다. $Y_j(T_j)$를 추청하려면, $T_j$와 겹쳐 생성된 모든 하위 구역의 값을 합산하면 된다.\n\n$$\n\\hat Y_j(T_j)=\\sum\\limits_{i=1}^p\\frac{|A_{ij}|}{|S_i|}Y_i(S_i)\n$$ {#eq-5-2}\n\n반면 공간 내포 변수의 경우, 해당 변수값이 개별 소스 구역 $S_i$ 내에서 일정하다고 가정하므로, 겹침에 의해 생성된 하위 구역의 추정값은 소스 구역의 전체의 값과 동일하다.\n\n$$\n\\hat Y_{ij}=Y_i(S_i)\n$$\n\n따라서 소스 구역의 값을 면적-가중 평균으로 계산하면, 타깃 구역 $T_j$에 대한 추정값을 얻을 수 있다.\n\n$$\n\\hat Y_j(T_j)=\\sum\\limits_{i=1}^p\\frac{|A_{ij}|}{|T_j|}Y_i(S_i)\n$$ {#eq-5-3}\n\n### 대시메트릭 매핑\n\n대시메트릭 매핑(dasymetric mapping)은 더 큰 구역 체계의 변수값(예: 인구 수)을 더 작은 구역 체계의 변수값으로 분배하는 방법이다. 이때 인구 분포와 관련된 다른 변수(예: 토지 이용, 건물 밀도, 도로 밀도 등)를 활용한다. 대시매트릭 매핑의 가장 간단한 방식은 식 5.2에서 나타난 비율 $|A_{ij}|/|S_i|$ 대신 또 다른 공간 외연 변수와 관련된 비율 $X_{ij}(S_{ij})/X_i(S_i)$을 사용하는 것이다. 이 방법을 적용하려면 소스 구역과 겹침 구역 모두에 대해 해당 변수의 값을 알고 있어야 한다.\n\n### 파일 포맷과 서포트\n\nGDAL의 벡터 API는 필드 도메인(field domains)을 읽고 쓰는 기능을 지원한다. 필드 도메인은 지오메트리가 분할되거나 결합될 때 속성 변수를 어떻게 처리할지를 지정하는 '분할 정책(split policy)'과 '병합 정책(merge policy)'을 포함한다. 예를 들어, 공간 내포 변수의 경우 분할 시에는 '중복(duplicate)', 병합 시에는 '기하 가중(geometry weighted)'을 적용할 수 있다. 반면, 공간 외연 변수의 경우 분할 시에는 '기하 비율(geometry ratio)', 병합 시에는 '합(sum)'을 적용할 수 있다. 이 기능을 지원하는 파일 형식에는 GeoPackage와 FileGDB가 있다.\n\n## 업스케일링과 다운스케일링\n\n업스케일링(upscaling)과 다운스케일링(downscaling)은 일반적으로 저해상도 데이터에서 고해상도 정보를 얻는 과정(하향 스케일링) 또는 고해상도 데이터에서 저해상도 정보를 얻는 과정(상향 스케일링)을 의미한다. 이 두 과정은 속성과 지오메트리의 관계, 즉 서포트의 변화를 야기한다. 업스케일링은 애그리게이션(aggregation), 다운스케일링은 디스애그리게이션(disaggregation)과 동의어로 사용할 수 있다. 다운스케일링의 가장 단순한 형태는 폴리곤, 라인, 그리드 셀의 값을 주어진 포인트에서 샘플링(또는 추출)하는 것이다. 이는 포인트 서포트를 가진 변수('상수' AGR)에는 적합하지만, 변수 값이 합산값일 경우에는 대략적인 결과만 제공한다. 다운스케일링의 대표적인 도전 과제로는, 첫째 저해상도 기상 예측 모형이나 기후 변화 모형으로부터 얻은 변수를 고해상도로 예측하는 것, 둘째 서로 다른 시공간 해상도를 가진 센서를 융합하여 위성 이미지에서 파생된 변수를 고해상도로 예측하는 것이 있다.\n\n식 5.1과 이에 기반으로 한 식 5.2(공간 외연 변수) 및 식 5.3(공간 내포 변수)는 소스 구역 $S_i$와 타깃 구역 $T_i$ 간에 겹침이 존재하기만 하면, 두 구역 사이에서 정보를 이동시킬 수 있음을 보여준다. 이는 임의로 더 큰 구역 단위로 이동(애그리게이션)하거나 더 작은 구역 단위로 이동(디스애그리게이션)할 수 있음을 의미한다. 다만 이러한 방식의 타당성은 다음 가정이 얼마나 성립하는지에 달려있다. 즉, 소스 구역에서 공간 외연 변수는 균등하게 분포해야 하고, 공간 내포 변수는 일정한 값을 가져야 한다.\n\n디스애그리게이션은 라인이나 폴리곤 데이터로부터 포인트 값을 추출하는 것에서 시작된다. 포인트는 면적을 갖지 않으므로($|A_{ij}|=0$) 식 5.2와 5.3은 적용할 수 없다. 그러나 지오메트리 내부의 값이 일정하다고 가정할 수 있다면, 공간 내포 변수인 경우 $Y_i(S_i)$ 값을 포인트에 할당할 수 있다. 단, 모든 포인트가 고유하게 하나의 소스 지점 $S_i$에만 할당될 수 있어야 한다. 폴리곤 데이터를 예로 들자면, 이는 $Y$가 커버리지 변수(3.4절)여야 함을 의미한다. 반면, 공간 외연 변수의 경우 포인트에 변수값을 추출하는 것은 무의미하다. 항상 0이 추출되기 때문이다.(역자주: 공간 외연 변수는 면적에 따라 비례적으로 값이 커지는 것인데, 포인트는 면적이 없으므로 값이 추출될 수 없다.)\n\n영역과 관련된 값이 해당 영역의 **집계** 값인 경우, 면적-가중 인터폴레이션이나 대시매트릭 매핑에서 가정하는 균일 분포 또는 일정한 값이라는 가정은 현실과 거리가 있을 수 있다. 그럼에도 이러한 단순한 접근법이 합리적인 근사치를 제공할 수 있는 경우가 있다. 예를 들어 다음과 같은 상황이다.\n\n-   소스 구역과 타깃 구역이 거의 동일한 경우\n\n-   소스 구역 내의 변동성이 매우 작아, 변수값이 거의 균등 분포하거나 일정한 값을 보이는 경우\n\n다른 경우에는 이러한 방법을 통해 얻어진 결과가 단지 타당성이 결여된 가정에 기반한 것일 수 있다. 점 또는 더 작은 구역으로부터 더 큰 구역에 대한 총량를 추정할 수 있는 통계적 애그리게이션 방법에는 다음이 있다.\n\n-   디자인-기반(design-based) 방법: 타깃 지역에서 확률 샘플이 확보되어 있고, 포함 확률(inclusion probability)이 알려져 있어야 한다(Brus 2021, 10.4 절).\n\n-   모형-기반(model-based) 방법: 공간적 자기상관을 고려하는 랜덤 필드 모형을 가정한다(예: 블록 크리깅, 12.5절).\n\n다른 디스애그리게이션 기법으로는 다음과 같은 것들이 있다.\n\n-   결정론적 평활화-기반 접근: 커널-기반 또는 스플라인-기반의 평활화 기법을 포함\n\n-   통계적 모형-기반 접근: 에어리어-투-에어리어 크리깅과 에어리어-투-포인트 크리깅\n\n## 연습문제\n\n다음의 연습문제를 풀되, 적절한 부분에서 R을 활용하라.\n\n1.  노스케롤라이나 데이터셋(`nc`)에 `nc$State = \"North Carolina\"`와 같이 변수를 추가한다고 가정하자(모든 카운티에 동일한 주 이름이 할당됨). 속성-지오메트리 관계(AGR) 측면에서 이 변수에 어떤 값을 지정할 수 있을까?\n\n2.  `st_union(nc)`으로 얻은 지오메트리로를 기반으로 새로운 `sf` 객체를 생성하고, `State` 변수에 `\"North Carolina\"` 값을 할당하시오. 이 경우, 해당 속성 변수에 어떤 속성-지오메트리 관계(AGR)를 지정할 수 있을까?\n\n3.  `nc` 데이터셋에 `st_area`를 사용하여 `area` 변수를 추가하시오. 그런 다음 `area` 변수와 `AREA` 변수를 비교하시오. `AREA`의 단위는 무엇인가? 두 변수는 선형적인 관련성을 가지는가? 만약 불일치가 존재한다면, 그 원인은 무엇인가?\n\n4.  `area`는 공간 내포 변수인가 공간 외연 변수인가? `area`의 AGR은 상수, 식별, 집계값 중 어느 것에 해당하는가?\n\n5.  그림 5.3에서 5.3.1 절에 나타나 있는 방정식을 이용하여 (a) 점선 셀과 (b)네 개의 실선 셀을 모두 포함하는 정사각형에 대해 면적-가중 인터폴레이션의 결과를 계산하시오. (b)의 경우, (i) 공간 외연 변수인 경우와 (ii) 공간 내포 변수인 경우로 나누어 계산하시오. 그림에서 빨간 숫자는 소스 구역의 데이터 값이다.\n\n\n::: {.cell}\n\n:::\n\n\n![면적-가중 인터폴레이션의 예시 데이터](https://r-spatial.org/book/05-Attributes_files/figure-html/fig-awiex-1.png){#fig-5-3}\n",
    "supporting": [
      "05_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}